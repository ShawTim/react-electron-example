{"version":3,"sources":["datastore.config.ts","datastore.ts","features/contact/api.ts","features/contact/slice.ts","features/system/api.ts","features/system/slice.ts","app/store.ts","app/hooks.ts","components/ContactList.tsx","components/ContactView.tsx","pages/ContactPage/index.tsx","pages/LoginPage/index.tsx","pages/InitPage/index.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["defaultContacts","encrypt","message","secret","CryptoJS","AES","toString","decrypt","ciphertext","enc","Utf8","checkDatabaseExist","a","isElectron","fs","window","require","open","CONFIG","code","console","error","sessionStorage","getItem","loadContacts","readFile","bytes","str","JSON","parse","storeContacts","contacts","stringify","writeFile","setItem","getContacts","saveContact","contact","trueContact","index","findIndex","c","id","newContact","uuidv4","newContacts","concat","deleteContact","filter","createAsyncThunk","getContactsAPI","saveContactAPI","deleteContactAPI","contactSlice","createSlice","name","initialState","reducers","extraReducers","builder","addCase","fulfilled","state","action","payload","reduce","map","checkDatabase","initDatabase","password","login","hasInit","hasLogin","initFailed","loginFailed","dataCorrupted","checkDatabaseAPI","initDatabaseAPI","loginAPI","success","systemSlice","logout","meta","arg","rejected","actions","history","createBrowserHistory","basename","process","rootReducer","combineReducers","router","connectRouter","system","systemReducer","contactReducer","store","configureStore","reducer","middleware","getDefaultMiddleware","routerMiddleware","useAppDispatch","useDispatch","useAppSelector","useSelector","highlight","search","toLowerCase","includes","regexp","RegExp","tokens","split","matched","match","token","i","className","Fragment","ContactList","props","onSelect","onCreate","useState","setSearch","filteredContacts","setFilteredContacts","onSearchChange","useCallback","ev","target","value","onCreateBtnClick","useEffect","lowerValue","phone","email","address","Form","Group","FormText","as","FormControl","type","onChange","title","Button","variant","onClick","length","ListGroup","Item","defaultProps","ContactView","edit","onSave","onClose","isEditing","setIsEditing","setName","setPhone","setEmail","setAddress","isEmailValid","setIsEmailValid","emailValidator","onEditBtnClick","onCloseBtnClick","onSaveBtnClick","onCancelBtnClick","onNameChange","onPhoneChange","onEmailChange","onAddressChange","FormGroup","Row","FormLabel","column","xs","Col","placeholder","isInvalid","Feedback","rows","disabled","line","ContactPage","dispatch","useHistory","useParams","setContacts","isCreate","location","pathname","startsWith","contactMap","Object","values","sort","b","localeCompare","onSelectContact","push","onCloseContact","onCreateContact","onSaveContact","Container","fluid","to","LoginPage","setPassword","onPasswordChange","onLoginBtnClick","close","sm","md","Alert","show","InputGroup","Prepend","Text","InitPage","confirmPassword","setConfirmPassword","onConfirmPasswordChange","onSetupBtnClick","App","path","render","Boolean","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"2WAEaA,EAAoC,CAAC,CAChD,KAAQ,cACR,MAAS,iBACT,MAAS,2BACT,QAAW,yCACV,CACD,KAAQ,gBACR,MAAS,eACT,MAAS,4BACT,QAAW,+CACV,CACD,KAAQ,iBACR,MAAS,gBACT,MAAS,+BACT,QAAW,mDACV,CACD,KAAQ,mBACR,MAAS,eACT,MAAS,qCACT,QAAW,8CACV,CACD,KAAQ,gBACR,MAAS,iBACT,MAAS,8BACT,QAAW,6CACV,CACD,KAAQ,gBACR,MAAS,eACT,MAAS,4BACT,QAAW,+CACV,CACD,KAAQ,iBACR,MAAS,gBACT,MAAS,+BACT,QAAW,mDACV,CACD,KAAQ,mBACR,MAAS,eACT,MAAS,qCACT,QAAW,8CACV,CACD,KAAQ,gBACR,MAAS,iBACT,MAAS,8BACT,QAAW,6CACV,CACD,KAAQ,gBACR,MAAS,eACT,MAAS,4BACT,QAAW,+CACV,CACD,KAAQ,iBACR,MAAS,gBACT,MAAS,+BACT,QAAW,mDACV,CACD,KAAQ,mBACR,MAAS,eACT,MAAS,qCACT,QAAW,8CACV,CACD,KAAQ,gBACR,MAAS,iBACT,MAAS,8BACT,QAAW,6CACV,CACD,KAAQ,gBACR,MAAS,eACT,MAAS,4BACT,QAAW,+CACV,CACD,KAAQ,iBACR,MAAS,gBACT,MAAS,+BACT,QAAW,mDACV,CACD,KAAQ,mBACR,MAAS,eACT,MAAS,qCACT,QAAW,8CACV,CACD,KAAQ,gBACR,MAAS,iBACT,MAAS,8BACT,QAAW,8CAGE,EACE,6CCpFJC,EAAU,SAACC,EAAiBC,GAEvC,OADmBC,IAASC,IAAIJ,QAAQC,EAASC,GAAQG,YAI9CC,EAAU,SAACC,EAAoBL,GAG1C,OAFcC,IAASC,IAAIE,QAAQC,EAAYL,GACzBG,SAASF,IAASK,IAAIC,OAIjCC,EAAkB,uCAAG,4BAAAC,EAAA,0DAC5BC,MAD4B,iCAGtBC,EAAKC,OAAOC,QAAQ,eAHE,SAItBF,EAAGG,KAAKC,EAAsB,MAJR,8DAMb,WAAX,KAAEC,MACJC,QAAQC,MAAR,MAP0B,mBASrB,GATqB,kCAWvB,GAXuB,mCAarBC,eAAeC,QAAQ,aAbF,yDAAH,qDAiBlBC,EAAY,uCAAG,WAAOrB,GAAP,yBAAAS,EAAA,mEAEpBC,MAFoB,wBAGhBC,EAAKC,OAAOC,QAAQ,eAHJ,SAIFF,EAAGW,SAASP,GAJV,cAIhBQ,EAJgB,OAKhBlB,EAAakB,EAAMpB,SAAS,QAC5BqB,EAAMpB,EAAQC,EAAYL,GANV,kBAOdyB,KAAKC,MAAMF,IAPG,eAShBnB,EAAac,eAAeC,QAAQ,aAAe,GACnDI,EAAMpB,EAAQC,EAAYL,GAVV,kBAWdyB,KAAKC,MAAMF,IAXG,+HAAH,sDAkBZG,EAAa,uCAAG,WAAOC,EAAqB5B,GAA5B,iBAAAS,EAAA,mEAErBC,MAFqB,uBAGjBC,EAAKC,OAAOC,QAAQ,eACpBR,EAAaP,EAAQ2B,KAAKI,UAAUD,GAAW5B,GAJ9B,SAKjBW,EAAGmB,UAAUf,EAAsBV,GALlB,6BAOvBc,eAAeY,QAAQ,WAAYjC,EAAQ2B,KAAKI,UAAUD,GAAW5B,IAP9C,8HAAH,wDChDbgC,EAAW,uCAAG,WAAOhC,GAAP,SAAAS,EAAA,+EAEVY,EAAarB,GAFH,8EAIjBA,GACJiB,QAAQC,MAAR,MALqB,8DAAH,sDAWXe,EAAW,uCAAG,WAAOC,EAAmClC,GAA1C,uBAAAS,EAAA,+EAEAY,EAAarB,GAFb,UAEjB4B,EAFiB,OAGjBO,EAAcD,KACdE,EAAQR,EAASS,WAAU,SAACC,GAAD,aAAOA,EAAEC,MAAF,UAAUJ,EAAYI,UAAtB,QAA4B,SACvD,GAAKJ,EAAYI,IALP,wBAMrBX,EAASQ,GAASD,EANG,UAOfR,EAAcC,EAAU5B,GAPT,iCAQdmC,GARc,eAUfK,EAVe,2BAUGN,GAVH,IAUYK,GAAIE,gBAC/BC,EAAcd,EAASe,OAAOH,GAXf,UAYfb,EAAce,EAAa1C,GAZZ,iCAadwC,GAbc,gEAgBjBxC,GACJiB,QAAQC,MAAR,MAjBqB,+DAAH,wDAuBX0B,EAAa,uCAAG,WAAOV,EAAkBlC,GAAzB,iBAAAS,EAAA,+EAEFY,EAAarB,GAFX,cAEnB4B,EAFmB,OAGnBc,EAAcd,EAASiB,QAAO,SAACP,GAAD,OAAOA,EAAEC,KAAOL,EAAQK,MAHnC,SAInBZ,EAAce,EAAa1C,GAJR,6DAMnBA,GACJiB,QAAQC,MAAR,MAPuB,8DAAH,wDCZbc,EAAcc,YACzB,cADyC,uCAEzC,+BAAArC,EAAA,6DAAST,EAAT,EAASA,OAAT,kBAE2B+C,EAAe/C,GAF1C,cAEU4B,EAFV,yBAGWA,GAHX,oGAFyC,uDAW9BK,EAAca,YACzB,eADyC,uCAEzC,iCAAArC,EAAA,6DAASyB,EAAT,EAASA,QAASlC,EAAlB,EAAkBA,OAAlB,kBAE6BgD,EAAed,EAASlC,GAFrD,cAEUwC,EAFV,yBAGWA,GAHX,oGAFyC,uDAW9BI,EAAgBE,YAC3B,iBAD2C,uCAE3C,+BAAArC,EAAA,6DAASyB,EAAT,EAASA,QAASlC,EAAlB,EAAkBA,OAAlB,kBAEUiD,EAAiBf,EAASlC,GAFpC,gCAGWkC,GAHX,oGAF2C,uDA+B9BgB,EAnBaC,YAAY,CACtCC,KAAM,UACNC,aAxCiC,CACjCzB,SAAU,IAwCV0B,SAAU,GACVC,cAAe,SAACC,GAAD,OAAaA,EACzBC,QAAQzB,EAAY0B,WAAW,SAACC,EAAOC,GACtC,IAAMhC,EAAWgC,EAAOC,QACxBF,EAAM/B,SAAWA,EAASkC,QAAO,SAACC,EAAK7B,GAAN,mBAAC,eAAuB6B,GAAxB,kBAA8B7B,EAAQK,GAAKL,MAAY,OAEzFuB,QAAQxB,EAAYyB,WAAW,SAACC,EAAOC,GACtC,IAAM1B,EAAU0B,EAAOC,QACvBF,EAAM/B,SAASM,EAAQK,IAAML,KAE9BuB,QAAQb,EAAcc,WAAW,SAACC,EAAOC,GACxC,IAAM1B,EAAU0B,EAAOC,eAChBF,EAAM/B,SAASM,EAAQK,UAIpC,QC3EayB,EAAa,uCAAG,sBAAAvD,EAAA,sEAAoCD,IAApC,mFAAH,qDAEbyD,EAAY,uCAAG,WAAOC,GAAP,SAAAzD,EAAA,+EAElBkB,EAAc9B,EAAgBkE,KAAI,SAAC7B,GAAD,mBAAC,eAAkBA,GAAnB,IAA4BK,GAAIE,mBAAcyB,GAF9D,yHAAH,sDASZC,EAAK,uCAAG,WAAOD,GAAP,SAAAzD,EAAA,+EAEXY,EAAa6C,GAFF,iCAGV,GAHU,0DAMV,GANU,wDAAH,sDCFZb,EAA0B,CAC9Be,SAAS,EACTC,UAAU,EACVC,YAAY,EACZC,aAAa,EACbC,eAAe,EACfxE,OAAQ,IAGGgE,EAAgBlB,YAC3B,uBAD2C,sBAE3C,4BAAArC,EAAA,sEACwBgE,IADxB,cACQL,EADR,yBAESA,GAFT,4CAKWH,EAAenB,YAC1B,sBAD0C,uCAE1C,WAAOoB,GAAP,SAAAzD,EAAA,sEACQiE,EAAgBR,GADxB,2CAF0C,uDAM/BC,EAAQrB,YACnB,eADmC,uCAEnC,WAAOoB,GAAP,eAAAzD,EAAA,sEACwBkE,EAAST,GADjC,cACQU,EADR,yBAESA,GAFT,2CAFmC,uDAQxBC,EAAc1B,YAAY,CACrCC,KAAM,SACNC,eACAC,SAAU,CACRwB,OAAQ,kBAAMzB,IAEhBE,cAAe,SAACC,GAAD,OAAaA,EACzBC,QAAQO,EAAcN,WAAW,SAACC,EAAOC,GACxCD,EAAMS,QAAUR,EAAOC,WAExBJ,QAAQQ,EAAaP,WAAW,SAACC,EAAOC,GACvCD,EAAMS,SAAU,EAChBT,EAAMU,UAAW,EACjBV,EAAM3D,OAAS4D,EAAOmB,KAAKC,OAE5BvB,QAAQU,EAAMT,WAAW,SAACC,EAAOC,GAChC,IAAMgB,EAAUhB,EAAOC,QACvBF,EAAMU,SAAWO,EACjBjB,EAAMW,YAAa,EACnBX,EAAMY,aAAeK,EACrBjB,EAAMa,eAAgB,EAClBI,IACFjB,EAAM3D,OAAS4D,EAAOmB,KAAKC,QAG9BvB,QAAQQ,EAAagB,UAAU,SAACtB,EAAOC,GACtCD,EAAMS,SAAU,EAChBT,EAAMW,YAAa,KAEpBb,QAAQzB,EAAYiD,UAAU,SAACtB,EAAOC,GACrCD,EAAMa,gBAAkBZ,EAAOmB,KAAKC,IAAIhF,OACxC2D,EAAMU,UAAW,KAElBZ,QAAQxB,EAAYgD,UAAU,SAACtB,EAAOC,GACrCD,EAAMa,gBAAkBZ,EAAOmB,KAAKC,IAAIhF,OACxC2D,EAAMU,UAAW,KAElBZ,QAAQb,EAAcqC,UAAU,SAACtB,EAAOC,GACvCD,EAAMa,gBAAkBZ,EAAOmB,KAAKC,IAAIhF,OACxC2D,EAAMU,UAAW,QAMRQ,GAFWA,EAAYK,QAAvBJ,OAEAD,EAAf,SCjFaM,EAAUC,YAAqB,CAAEC,SAAUC,4BAE3CC,EAAcC,YAAgB,CACzCC,OAAQC,YAAcP,GACtBQ,OAAQC,EACR1D,QAAS2D,IAGEC,EAAQC,YAAe,CAClCC,QAAST,EACTU,WAAY,SAACC,GAAD,OAA0BA,IAAuBvD,OAAOwD,YAAiBhB,O,kCCb1EiB,GAAiB,kBAAMC,eACvBC,GAAkDC,I,wDCMzDC,GAAY,SAAChF,EAAaiF,GAC9B,GAAIjF,EAAIkF,cAAcC,SAASF,EAAOC,eAAgB,CACpD,IAAME,EAAS,IAAIC,OAAOJ,EAAQ,MAC5BK,EAAStF,EAAIuF,MAAMH,GACnBI,EAAUxF,EAAIyF,MAAML,GAC1B,OAAOE,EAAO/C,KAAI,SAACmD,EAAOC,GAAO,IAAD,EACxBF,EAAQE,EAAI,EAAI,uBAAMC,UAAU,MAAhB,0BAAuBJ,QAAvB,IAAuBA,OAAvB,EAAuBA,EAAUG,EAAE,UAAnC,QAAyC,KAAa,GAC5E,OAAQ,gBAAC,IAAME,SAAP,WAA6CJ,EAAOC,IAApD,gBAA8BA,EAA9B,YAAuCC,OAGjD,OAAO3F,GAIL8F,GAAc,SAACC,GACnB,IAAQ3F,EAAiC2F,EAAjC3F,SAAU4F,EAAuBD,EAAvBC,SAAUC,EAAaF,EAAbE,SAC5B,EAA4BC,mBAAiB,IAA7C,mBAAOjB,EAAP,KAAekB,EAAf,KACA,EAAgDD,mBAAoB9F,GAApE,mBAAOgG,EAAP,KAAyBC,EAAzB,KAEMC,EAAiBC,uBAAY,SAACC,GAAD,OAA6CL,EAAUK,EAAGC,OAAOC,SAAQ,IACtGC,EAAmBJ,uBAAY,kBAAMN,MAAY,CAACA,IAmBxD,OAhBAW,qBAAU,WAENP,EADEpB,EACkB7E,EAASiB,QAAO,SAACX,GACnC,IAAMmG,EAAa5B,EAAOC,cAC1B,OACExE,EAAQkB,KAAKsD,cAAcC,SAAS0B,IACpCnG,EAAQoG,MAAM5B,cAAcC,SAAS0B,IACrCnG,EAAQqG,MAAM7B,cAAcC,SAAS0B,IACrCnG,EAAQsG,QAAQ9B,cAAcC,SAAS0B,MAIvBzG,KAErB,CAAC6E,EAAQ7E,IAGV,uCACE,uBAAKwF,UAAU,2CAAf,UACE,gBAACqB,GAAA,EAAKC,MAAN,CAAYtB,UAAU,kCAAtB,UACE,eAACuB,GAAA,EAAD,CAAUC,GAAG,IAAIxB,UAAU,wCAC3B,eAACyB,GAAA,EAAD,CACEzB,UAAU,gBACV0B,KAAK,SACLZ,MAAOzB,EACPsC,SAAUjB,EACVkB,MAAM,kBACN,aAAW,uBAEf,eAACC,GAAA,EAAD,CAAQC,QAAQ,QAAQF,MAAM,kBAAkB,aAAW,kBAAkBG,QAAShB,EAAtF,SACE,oBAAGf,UAAU,uBAGdQ,EAAiBwB,OAClB,eAACC,GAAA,EAAD,CAAWjC,UAAU,iBAArB,SACGQ,EAAiB7D,KAAI,SAAC7B,GAAD,OACpB,gBAACmH,GAAA,EAAUC,KAAX,CAEElC,UAAU,8CACVxD,QAAM,EACNuF,QAAS,kBAAM3B,EAAStF,EAAQK,KAJlC,UAKE,eAACoG,GAAA,EAAD,CAAUC,GAAG,IAAIxB,UAAU,6BAC3B,eAACuB,GAAA,EAAD,CAAUC,GAAG,QAAQxB,UAAU,iBAA/B,SAAiDZ,GAAUtE,EAAQkB,KAAMqD,KACzE,eAACkC,GAAA,EAAD,CAAUvB,UAAU,wBAApB,SAA4C,iCAAQZ,GAAUtE,EAAQoG,MAAO7B,SANxEvE,EAAQK,SAWnB,sBAAK6E,UAAU,wDAAf,SAA0EX,EAAS,uBAAyB,qBAMpHa,GAAYiC,aAAe,CACzB3H,SAAU,GACV4F,SAAU,aACVC,SAAU,cAGGH,U,2BCjFTkC,GAAc,SAACjC,GAA6B,IAAD,QACvCrF,EAAmCqF,EAAnCrF,QAASuH,EAA0BlC,EAA1BkC,KAAMC,EAAoBnC,EAApBmC,OAAQC,EAAYpC,EAAZoC,QAC/B,EAAkCjC,mBAAkB+B,GAApD,mBAAOG,EAAP,KAAkBC,EAAlB,KACA,EAAwBnC,mBAAQ,iBAASxF,QAAT,IAASA,OAAT,EAASA,EAASkB,YAAlB,QAA0B,IAA1D,mBAAOA,EAAP,KAAa0G,EAAb,KACA,EAA0BpC,mBAAQ,iBAASxF,QAAT,IAASA,OAAT,EAASA,EAASoG,aAAlB,QAA2B,IAA7D,mBAAOA,EAAP,KAAcyB,EAAd,KACA,EAA0BrC,mBAAQ,iBAASxF,QAAT,IAASA,OAAT,EAASA,EAASqG,aAAlB,QAA2B,IAA7D,mBAAOA,EAAP,KAAcyB,EAAd,KACA,EAA8BtC,mBAAQ,iBAASxF,QAAT,IAASA,OAAT,EAASA,EAASsG,eAAlB,QAA6B,IAAnE,mBAAOA,EAAP,KAAgByB,EAAhB,KACA,EAAwCvC,oBAAkB,GAA1D,mBAAOwC,EAAP,KAAqBC,EAArB,KAGA/B,qBAAU,WAAO,IAAD,QACdyB,GAAa,GACbC,EAAO,iBAAC5H,QAAD,IAACA,OAAD,EAACA,EAASkB,YAAV,QAAkB,IACzB2G,EAAQ,iBAAC7H,QAAD,IAACA,OAAD,EAACA,EAASoG,aAAV,QAAmB,IAC3B0B,EAAQ,iBAAC9H,QAAD,IAACA,OAAD,EAACA,EAASqG,aAAV,QAAmB,IAC3B0B,EAAU,iBAAC/H,QAAD,IAACA,OAAD,EAACA,EAASsG,eAAV,QAAqB,MAC9B,CAACtG,IAGJkG,qBAAU,kBAAMyB,EAAaJ,KAAO,CAACA,IAGrCrB,qBAAU,kBAAM+B,GAAiB5B,GAAS6B,YAAwB7B,MAAS,CAACA,IAE5E,IAAM8B,EAAiBtC,uBAAY,kBAAM8B,GAAa,KAAO,IACvDS,EAAkBvC,uBAAY,kBAAM4B,MAAW,CAACA,IAChDY,EAAiBxC,uBAAY,WAC7B3E,GAAQkF,GAASC,GAASC,GAAW0B,IACvCR,EAAO,CAAEnH,GAAE,OAAEL,QAAF,IAAEA,OAAF,EAAEA,EAASK,GAAIa,OAAMkF,QAAOC,QAAOC,YAC9CqB,GAAa,MAEd,CAAC3H,EAASkB,EAAMkF,EAAOC,EAAOC,EAAS0B,EAAcR,IAClDc,EAAmBzC,uBAAY,kBAAM0B,EAAOE,IAAYE,GAAa,KAAQ,CAACJ,EAAME,IACpFc,EAAe1C,uBAAY,SAACC,GAAD,OAA6C8B,EAAQ9B,EAAGC,OAAOC,SAAQ,IAClGwC,EAAgB3C,uBAAY,SAACC,GAAD,OAA6C+B,EAAS/B,EAAGC,OAAOC,SAAQ,IACpGyC,EAAgB5C,uBAAY,SAACC,GAAD,OAA6CgC,EAAShC,EAAGC,OAAOC,SAAQ,IACpG0C,EAAkB7C,uBAAY,SAACC,GAAD,OAA6CiC,EAAWjC,EAAGC,OAAOC,SAAQ,IAG9G,OAAKhG,GAAYuH,EAKf,uCACE,uBAAKrC,UAAU,2CAAf,WACIwC,GACA,eAACX,GAAA,EAAD,CAAQC,QAAQ,QAAQF,MAAM,oBAAoB,aAAW,oBAAoBG,QAASkB,EAA1F,SACE,oBAAGjD,UAAU,wBAGjB,eAAC6B,GAAA,EAAD,CAAQC,QAAQ,QAAQF,MAAM,qBAAqB,aAAW,qBAAqBG,QAASmB,EAA5F,SACE,oBAAGlD,UAAU,oBAGhBwC,EACC,uBAAKxC,UAAU,yBAAf,UACE,qBAAIA,UAAU,8BAAd,SAA4C,oBAAGA,UAAU,0BACzD,gBAACqB,GAAA,EAAD,CAAMrB,UAAU,MAAhB,UACE,gBAACyD,GAAA,EAAD,CAAWjC,GAAIkC,IAAK1D,UAAU,OAA9B,UACE,gBAAC2D,GAAA,EAAD,CAAWC,QAAM,EAACC,GAAI,EAAG7D,UAAU,cAAnC,UAAiD,oBAAGA,UAAU,sBAA9D,UACA,eAAC8D,EAAA,EAAD,CAAKD,GAAI,EAAT,SACE,eAACpC,GAAA,EAAD,CAAaC,KAAK,OAAOqC,YAAY,OAAOjD,MAAO9E,EAAM2F,SAAU0B,SAGvE,gBAACI,GAAA,EAAD,CAAWjC,GAAIkC,IAAK1D,UAAU,OAA9B,UACE,gBAAC2D,GAAA,EAAD,CAAWC,QAAM,EAACC,GAAI,EAAG7D,UAAU,cAAnC,UAAiD,oBAAGA,UAAU,yBAA9D,WACA,eAAC8D,EAAA,EAAD,CAAKD,GAAI,EAAT,SACE,eAACpC,GAAA,EAAD,CAAaC,KAAK,MAAMqC,YAAY,QAAQjD,MAAOI,EAAOS,SAAU2B,SAGxE,gBAACG,GAAA,EAAD,CAAWjC,GAAIkC,IAAK1D,UAAU,OAA9B,UACE,gBAAC2D,GAAA,EAAD,CAAWC,QAAM,EAACC,GAAI,EAAG7D,UAAU,cAAnC,UAAiD,oBAAGA,UAAU,wBAA9D,WACA,gBAAC8D,EAAA,EAAD,CAAKD,GAAI,EAAT,UACE,eAACpC,GAAA,EAAD,CAAaC,KAAK,QAAQqC,YAAY,QAAQjD,MAAOK,EAAO6C,WAAYlB,EAAcnB,SAAU4B,IAChG,eAAC9B,GAAA,EAAYwC,SAAb,CAAsBvC,KAAK,UAA3B,sCAGJ,gBAAC+B,GAAA,EAAD,CAAWjC,GAAIkC,IAAK1D,UAAU,OAA9B,UACE,gBAAC2D,GAAA,EAAD,CAAWC,QAAM,EAACC,GAAI,EAAG7D,UAAU,cAAnC,UAAiD,oBAAGA,UAAU,qBAA9D,aACA,eAAC8D,EAAA,EAAD,CAAKD,GAAI,EAAT,SACE,eAACpC,GAAA,EAAD,CAAaD,GAAG,WAAW0C,KAAM,EAAGH,YAAY,UAAUjD,MAAOM,EAASO,SAAU6B,SAGxF,gBAACC,GAAA,EAAD,CAAWzD,UAAU,kCAArB,UACE,eAAC6B,GAAA,EAAD,CACEC,QAAQ,UACR9B,UAAU,MACV4B,MAAM,oBACNuC,WAAYnI,GAAQkF,GAASC,GAASC,GAAW0B,GACjD,aAAW,oBACXf,QAASoB,EANX,kBASA,eAACtB,GAAA,EAAD,CAAQC,QAAQ,QAAQ9B,UAAU,MAAM4B,MAAM,eAAe,aAAW,eAAeG,QAASqB,EAAhG,6BAKN,uBAAKpD,UAAU,yBAAf,UACE,qBAAIA,UAAU,8BAAd,SAA4C,oBAAGA,UAAU,0BACzD,qBAAIA,UAAU,oBAAd,SAAmChE,IACnC,2BAASgE,UAAU,MAAnB,UACE,uBAAK4B,MAAM,QAAX,UACE,oBAAG5B,UAAU,yBACb,gCAAOkB,OAET,uBAAKU,MAAM,QAAX,UACE,oBAAG5B,UAAU,wBACb,gCAAOmB,OAET,uBAAKnB,UAAU,SAAS4B,MAAM,UAA9B,UACE,oBAAG5B,UAAU,qBACb,gCAAOoB,EAAQzB,MAAM,MAAMhD,KAAI,SAACyH,EAAMrE,GAAP,OAAa,+BAAgCqE,GAAhC,eAAkBA,EAAlB,YAA0BrE,qBAzEzE,MAkFXqC,GAAYD,aAAe,CACzBrH,QAAS,KACTuH,MAAM,EACNC,OAAQ,aACRC,QAAS,cAGIH,UC7EAiC,GAxDK,WAAO,IAAD,EAClBC,EAAWtF,KACXjB,EAAUwG,cACRpJ,EAAOqJ,cAAPrJ,GACR,EAAgCmF,mBAAoB,IAApD,mBAAO9F,EAAP,KAAiBiK,EAAjB,KACA,EAAsCvF,IAAe,SAAC3C,GAAD,OAAWA,EAAMgC,UAA9DvB,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,SAAUrE,EAA3B,EAA2BA,OACrB8L,EAAW3G,EAAQ4G,SAASC,SAASC,WAAW,oBAChDC,EAAa5F,IAAe,SAAC3C,GAAD,OAAWA,EAAMzB,QAAQN,YACrDM,EAAU4J,EAAW,KAAH,UAAWI,EAAW3J,UAAtB,QAA6B,KAGrD6F,qBAAU,WACRsD,EAAS1J,EAAY,CAAEhC,cACtB,CAACA,EAAQ0L,IAGZtD,qBAAU,WACRyD,EAAYM,OAAOC,OAAOF,GAAYG,MAAK,SAAC5L,EAAG6L,GAAJ,OAAU7L,EAAE2C,KAAKmJ,cAAcD,EAAElJ,YAC3E,CAAC8I,IAGJ,IAAMM,EAAkBzE,uBAAY,SAACxF,GAAD,OAAgB4C,EAAQsH,KAAR,yBAA+BlK,MAAO,CAAC4C,IAErFuH,EAAiB3E,uBAAY,kBAAM5C,EAAQsH,KAAK,eAAc,CAACtH,IAE/DwH,EAAkB5E,uBAAY,kBAAM5C,EAAQsH,KAAK,sBAAqB,CAACtH,IAEvEyH,EAAgB7E,uBAAY,SAAC7F,GACjCwJ,EAASzJ,EAAY,CAAEC,UAASlC,YAChCmF,EAAQsH,KAAK,eACZ,CAACzM,EAAQmF,EAASuG,IAGrB,OAAKtH,EAKAC,EAKH,eAACwI,EAAA,EAAD,CAAWC,OAAK,EAAC1F,UAAU,uBAA3B,SACE,gBAAC0D,EAAA,EAAD,CAAK1D,UAAU,QAAf,UACE,eAAC8D,EAAA,EAAD,CAAKD,GAAI,EAAG7D,UAAU,qCAAtB,SACE,eAAC,GAAD,CAAaxF,SAAUA,EAAU4F,SAAUgF,EAAiB/E,SAAUkF,MAExE,eAACzB,EAAA,EAAD,CAAKD,GAAI,EAAG7D,UAAU,YAAtB,SACE,eAAC,GAAD,CAAalF,QAASA,EAASuH,KAAMqC,EAAUnC,QAAS+C,EAAgBhD,OAAQkD,WAV/E,eAAC,IAAD,CAAUG,GAAG,WALb,eAAC,IAAD,CAAUA,GAAG,O,oBC4BTC,GAhEG,WAChB,IAAMtB,EAAWtF,KACjB,EAA0DE,IAAe,SAAC3C,GAAD,OAAWA,EAAMgC,UAAlFvB,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,SAAUE,EAA3B,EAA2BA,YAAaC,EAAxC,EAAwCA,cACxC,EAAgCkD,mBAAiB,IAAjD,mBAAOxD,EAAP,KAAiB+I,EAAjB,KAEMC,EAAmBnF,uBAAY,SAACC,GAAD,OAA6CiF,EAAYjF,EAAGC,OAAOC,SAAQ,IAC1GiF,EAAkBpF,uBAAY,kBAAM2D,EAASvH,EAAMD,MAAY,CAACA,EAAUwH,IAC1EpB,EAAkBvC,uBAAY,kBAAMnH,OAAOwM,UAAS,IAG1D,OAAKhJ,EAKDC,EACK,eAAC,IAAD,CAAU0I,GAAG,cAIpB,gBAACF,EAAA,EAAD,WACE,eAAC/B,EAAA,EAAD,UACE,eAACI,EAAA,EAAD,CAAK9D,UAAU,kBAAf,SACE,+EAGJ,eAAC0D,EAAA,EAAD,UACE,eAACI,EAAA,EAAD,CAAK9D,UAAU,kBAAf,SACE,4FAGJ,eAAC0D,EAAA,EAAD,CAAK1D,UAAU,yBAAf,SACE,gBAAC8D,EAAA,EAAD,CAAKD,GAAI,GAAIoC,GAAI,EAAGC,GAAI,EAAxB,UACE,gBAACC,GAAA,EAAD,CAAOC,OAAQjJ,KAAiBC,EAAe0E,QAAQ,SAAvD,YACK3E,GAAe,uDACfC,GAAiB,kEAEtB,gBAACiJ,GAAA,EAAD,CAAYrG,UAAU,OAAtB,UACE,eAACqG,GAAA,EAAWC,QAAZ,UACE,eAACD,GAAA,EAAWE,KAAZ,CAAiBpL,GAAG,gBAApB,SACE,oBAAG6E,UAAU,uBAGjB,eAACyB,GAAA,EAAD,CACEtG,GAAG,WACHuG,KAAK,WACLZ,MAAOhE,EACPiH,YAAY,WACZ,aAAW,WACX,mBAAiB,gBACjBpC,SAAUmE,YAIlB,eAACpC,EAAA,EAAD,UACE,gBAACI,EAAA,EAAD,CAAK9D,UAAU,gCAAf,UACE,eAAC6B,GAAA,EAAD,CAAQ7B,UAAU,MAAM8B,QAAQ,UAAUC,QAASgE,EAAnD,0BACA,eAAClE,GAAA,EAAD,CAAQ7B,UAAU,MAAM8B,QAAQ,QAAQC,QAASmB,EAAjD,2BA9CC,eAAC,IAAD,CAAUyC,GAAG,OC+ETa,GAxFE,WACf,IAAMlC,EAAWtF,KACjB,EAA0CE,IAAe,SAAC3C,GAAD,OAAWA,EAAMgC,UAAlEvB,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,SAAUC,EAA3B,EAA2BA,WAC3B,EAAgCoD,mBAAiB,IAAjD,mBAAOxD,EAAP,KAAiB+I,EAAjB,KACA,EAA8CvF,mBAAiB,IAA/D,mBAAOmG,EAAP,KAAwBC,EAAxB,KAEMZ,EAAmBnF,uBAAY,SAACC,GAAD,OAA6CiF,EAAYjF,EAAGC,OAAOC,SAAQ,IAC1G6F,EAA0BhG,uBAAY,SAACC,GAAD,OAA6C8F,EAAmB9F,EAAGC,OAAOC,SAAQ,IACxH8F,EAAkBjG,uBAAY,WAC5B7D,GAAYA,IAAa2J,GAC7BnC,EAASzH,EAAaC,MAEvB,CAACA,EAAU2J,EAAiBnC,IACzBpB,EAAkBvC,uBAAY,kBAAMnH,OAAOwM,UAAS,IAG1D,OAAI/I,EACK,eAAC,IAAD,CAAU0I,GAAG,cAIlB3I,EACK,eAAC,IAAD,CAAU2I,GAAG,WAIpB,gBAACF,EAAA,EAAD,WACE,eAAC/B,EAAA,EAAD,UACE,eAACI,EAAA,EAAD,CAAK9D,UAAU,kBAAf,SACE,4DAGJ,eAAC0D,EAAA,EAAD,UACE,eAACI,EAAA,EAAD,CAAK9D,UAAU,kBAAf,SACE,qGAGJ,eAAC0D,EAAA,EAAD,CAAK1D,UAAU,yBAAf,SACE,gBAAC8D,EAAA,EAAD,CAAKD,GAAI,GAAIoC,GAAI,EAAGC,GAAI,EAAxB,UACE,eAACC,GAAA,EAAD,CAAOC,OAAQlJ,EAAY4E,QAAQ,SAAnC,gFACA,gBAACuE,GAAA,EAAD,CAAYrG,UAAU,OAAtB,UACE,eAACqG,GAAA,EAAWC,QAAZ,UACE,eAACD,GAAA,EAAWE,KAAZ,CAAiBpL,GAAG,gBAApB,SACE,oBAAG6E,UAAU,uBAGjB,eAACyB,GAAA,EAAD,CACEtG,GAAG,WACHuG,KAAK,WACLZ,MAAOhE,EACPiH,YAAY,WACZ,aAAW,WACX,mBAAiB,gBACjBpC,SAAUmE,YAIlB,eAACpC,EAAA,EAAD,CAAK1D,UAAU,yBAAf,SACE,eAAC8D,EAAA,EAAD,CAAKD,GAAI,GAAIoC,GAAI,EAAGC,GAAI,EAAxB,SACE,gBAACG,GAAA,EAAD,CAAYrG,UAAU,OAAtB,UACE,eAACqG,GAAA,EAAWC,QAAZ,UACE,eAACD,GAAA,EAAWE,KAAZ,CAAiBpL,GAAG,wBAApB,SACE,oBAAG6E,UAAU,uBAGjB,eAACyB,GAAA,EAAD,CACEtG,GAAG,mBACHuG,KAAK,WACLZ,MAAO2F,EACPzC,YAAayC,GAAmB3J,IAAa2J,EAC7C1C,YAAY,mBACZ,aAAW,mBACX,mBAAiB,wBACjBpC,SAAUgF,IACZ,eAAClF,GAAA,EAAYwC,SAAb,CAAsBvC,KAAK,UAA3B,wCAIN,eAACgC,EAAA,EAAD,UACE,gBAACI,EAAA,EAAD,CAAK9D,UAAU,gCAAf,UACE,eAAC6B,GAAA,EAAD,CAAQ7B,UAAU,MAAM8B,QAAQ,UAAUC,QAAS6E,EAAiBzC,UAAWrH,GAAYA,IAAa2J,EAAxG,mBACA,eAAC5E,GAAA,EAAD,CAAQ7B,UAAU,MAAM8B,QAAQ,QAAQC,QAASmB,EAAjD,4BC1DK2D,I,OAnBH,WACV,IAAMvC,EAAWtF,KAOjB,OAJAgC,qBAAU,WACRsD,EAAS1H,OACR,CAAC0H,IAGF,eAAC,IAAD,CAAiBvG,QAASA,EAA1B,SACE,gBAAC,IAAD,WACE,eAAC,IAAD,CAAO+I,KAAM,CAAC,qBAAsB,mBAAoB,aAAcC,OAAQ,kBAAM,eAAC,GAAD,OACpF,eAAC,IAAD,CAAOD,KAAK,SAASC,OAAQ,kBAAM,eAAC,GAAD,OACnC,eAAC,IAAD,CAAOD,KAAK,IAAIC,OAAQ,kBAAM,eAAC,GAAD,cCdlBC,QACW,cAA7BxN,OAAOmL,SAASsC,UAEe,UAA7BzN,OAAOmL,SAASsC,UAEhBzN,OAAOmL,SAASsC,SAASpH,MACvB,2D,4BCLNqH,IAASH,OACP,eAAC,IAAD,CAAUrI,MAAOA,EAAjB,SACE,eAAC,GAAD,MAEFyI,SAASC,eAAe,SDuHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAACC,GACLA,EAAaC,gBAEdC,OAAM,SAAC7N,GACND,QAAQC,MAAMA,EAAMnB,a","file":"static/js/main.c474b929.chunk.js","sourcesContent":["import { ContactContent } from './features/contact/slice';\n\nexport const defaultContacts: ContactContent[] = [{\n  \"name\": \"Jaime Banks\",\n  \"phone\": \"(08) 9345 2040\",\n  \"email\": \"jbanks298@sknabemiaj.net\",\n  \"address\": \"995 Harrison Loop\\nFresno, Utah 16361\"\n}, {\n  \"name\": \"Angelina Pham\",\n  \"phone\": \"780-752-4296\",\n  \"email\": \"apham153@mahpanilegna.biz\",\n  \"address\": \"987 Buchanan Lane\\nCharleston, Kansas 96551\"\n}, {\n  \"name\": \"Bradley Norton\",\n  \"phone\": \"0131 240 0801\",\n  \"email\": \"bnorton872@notronyeldarb.net\",\n  \"address\": \"172 7th Lane\\nColorado Springs, Louisiana 75953\"\n}, {\n  \"name\": \"Ebony Montgomery\",\n  \"phone\": \"01934 623526\",\n  \"email\": \"emontgomery714@yremogtnomynobe.com\",\n  \"address\": \"768 McKinley Alley\\nNorfolk, Wyoming 99290\"\n}, {\n  \"name\": \"Jordan Moreno\",\n  \"phone\": \"(814) 542-4414\",\n  \"email\": \"jmoreno470@oneromnadroj.com\",\n  \"address\": \"161 Pecan Loop\\nPasadena, Minnesota 65295\"\n}, {\n  \"name\": \"Angelina Pham\",\n  \"phone\": \"780-752-4296\",\n  \"email\": \"apham153@mahpanilegna.biz\",\n  \"address\": \"987 Buchanan Lane\\nCharleston, Kansas 96551\"\n}, {\n  \"name\": \"Bradley Norton\",\n  \"phone\": \"0131 240 0801\",\n  \"email\": \"bnorton872@notronyeldarb.net\",\n  \"address\": \"172 7th Lane\\nColorado Springs, Louisiana 75953\"\n}, {\n  \"name\": \"Ebony Montgomery\",\n  \"phone\": \"01934 623526\",\n  \"email\": \"emontgomery714@yremogtnomynobe.com\",\n  \"address\": \"768 McKinley Alley\\nNorfolk, Wyoming 99290\"\n}, {\n  \"name\": \"Jordan Moreno\",\n  \"phone\": \"(814) 542-4414\",\n  \"email\": \"jmoreno470@oneromnadroj.com\",\n  \"address\": \"161 Pecan Loop\\nPasadena, Minnesota 65295\"\n}, {\n  \"name\": \"Angelina Pham\",\n  \"phone\": \"780-752-4296\",\n  \"email\": \"apham153@mahpanilegna.biz\",\n  \"address\": \"987 Buchanan Lane\\nCharleston, Kansas 96551\"\n}, {\n  \"name\": \"Bradley Norton\",\n  \"phone\": \"0131 240 0801\",\n  \"email\": \"bnorton872@notronyeldarb.net\",\n  \"address\": \"172 7th Lane\\nColorado Springs, Louisiana 75953\"\n}, {\n  \"name\": \"Ebony Montgomery\",\n  \"phone\": \"01934 623526\",\n  \"email\": \"emontgomery714@yremogtnomynobe.com\",\n  \"address\": \"768 McKinley Alley\\nNorfolk, Wyoming 99290\"\n}, {\n  \"name\": \"Jordan Moreno\",\n  \"phone\": \"(814) 542-4414\",\n  \"email\": \"jmoreno470@oneromnadroj.com\",\n  \"address\": \"161 Pecan Loop\\nPasadena, Minnesota 65295\"\n}, {\n  \"name\": \"Angelina Pham\",\n  \"phone\": \"780-752-4296\",\n  \"email\": \"apham153@mahpanilegna.biz\",\n  \"address\": \"987 Buchanan Lane\\nCharleston, Kansas 96551\"\n}, {\n  \"name\": \"Bradley Norton\",\n  \"phone\": \"0131 240 0801\",\n  \"email\": \"bnorton872@notronyeldarb.net\",\n  \"address\": \"172 7th Lane\\nColorado Springs, Louisiana 75953\"\n}, {\n  \"name\": \"Ebony Montgomery\",\n  \"phone\": \"01934 623526\",\n  \"email\": \"emontgomery714@yremogtnomynobe.com\",\n  \"address\": \"768 McKinley Alley\\nNorfolk, Wyoming 99290\"\n}, {\n  \"name\": \"Jordan Moreno\",\n  \"phone\": \"(814) 542-4414\",\n  \"email\": \"jmoreno470@oneromnadroj.com\",\n  \"address\": \"161 Pecan Loop\\nPasadena, Minnesota 65295\"\n}];\n\nexport default {\n  datastorePath: \"C:\\\\Users\\\\kcliu\\\\Downloads\\\\contacts.data\",\n  defaultContacts,\n};\n","import CryptoJS from 'crypto-js';\nimport isElectron from 'is-electron';\n\nimport CONFIG from './datastore.config';\nimport { Contact } from './features/contact/slice';\n\nexport const encrypt = (message: string, secret: string): string => {\n  const ciphertext = CryptoJS.AES.encrypt(message, secret).toString();\n  return ciphertext;\n};\n\nexport const decrypt = (ciphertext: string, secret: string): string => {\n  const bytes = CryptoJS.AES.decrypt(ciphertext, secret);\n  const message = bytes.toString(CryptoJS.enc.Utf8);\n  return message;\n};\n\nexport const checkDatabaseExist = async (): Promise<Boolean> => {\n  if (isElectron()) {\n    try {\n      const fs = window.require(\"fs/promises\");\n      await fs.open(CONFIG.datastorePath, \"r+\");\n    } catch (e) {\n      if (e.code !== \"ENOENT\") {\n        console.error(e);\n      }\n      return false;\n    }\n    return true;\n  } else {\n    return !!sessionStorage.getItem(\"contacts\");\n  }\n};\n\nexport const loadContacts = async (secret: string): Promise<Contact[]> => {\n  try {\n    if (isElectron()) {\n      const fs = window.require(\"fs/promises\");\n      const bytes = await fs.readFile(CONFIG.datastorePath);\n      const ciphertext = bytes.toString(\"utf8\");\n      const str = decrypt(ciphertext, secret);\n      return (JSON.parse(str) as Contact[]);\n    } else {\n      const ciphertext = sessionStorage.getItem(\"contacts\") || \"\";\n      const str = decrypt(ciphertext, secret);\n      return (JSON.parse(str) as Contact[]);\n    }\n  } catch (e) {\n    throw e;\n  }\n};\n\nexport const storeContacts = async (contacts: Contact[], secret: string): Promise<void> => {\n  try {\n    if (isElectron()) {\n      const fs = window.require(\"fs/promises\");\n      const ciphertext = encrypt(JSON.stringify(contacts), secret);\n      await fs.writeFile(CONFIG.datastorePath, ciphertext);\n    } else {\n      sessionStorage.setItem(\"contacts\", encrypt(JSON.stringify(contacts), secret));\n    }\n  } catch (e) {\n    throw e;\n  }\n};","import { v4 as uuidv4 } from 'uuid';\nimport { loadContacts, storeContacts } from '../../datastore';\nimport { Contact, ContactContent } from \"./slice\";\n\nexport const getContacts = async (secret: string): Promise<Array<Contact>> => {\n  try {\n    return await loadContacts(secret);\n  } catch (e) {\n    if (!!secret) {\n      console.error(e);\n    }\n    throw e;\n  }\n};\n\nexport const saveContact = async (contact: Contact | ContactContent, secret: string): Promise<Contact> => {\n  try {\n    const contacts = await loadContacts(secret);\n    const trueContact = contact as Contact;\n    const index = contacts.findIndex((c) => c.id === (trueContact.id ?? \"\"));\n    if (index >= 0 && trueContact.id) {\n      contacts[index] = trueContact;\n      await storeContacts(contacts, secret);\n      return trueContact;\n    } else {\n      const newContact = { ...contact, id: uuidv4()};\n      const newContacts = contacts.concat(newContact);\n      await storeContacts(newContacts, secret);\n      return newContact;\n    }\n  } catch (e) {\n    if (!!secret) {\n      console.error(e);\n    }\n    throw e;\n  }\n};\n\nexport const deleteContact = async (contact: Contact, secret: string): Promise<void> => {\n  try {\n    const contacts = await loadContacts(secret);\n    const newContacts = contacts.filter((c) => c.id !== contact.id);\n    await storeContacts(newContacts, secret);\n  } catch (e) {\n    if (!!secret) {\n      console.error(e);\n    }\n    throw e;\n  }\n};\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport {\n  getContacts as getContactsAPI,\n  saveContact as saveContactAPI,\n  deleteContact as deleteContactAPI\n} from './api';\n\nexport type ContactContent = {\n  name: string,\n  phone: string,\n  email: string,\n  address: string,\n};\nexport type Contact = ContactContent & {\n  id: string,\n};\nexport type ContactState = {\n  contacts: {\n    [id: string]: Contact,\n  };\n};\n\nconst initialState: ContactState = {\n  contacts: {},\n};\n\nexport const getContacts = createAsyncThunk(\n  'contact/get',\n  async ({ secret }: { secret: string }) => {\n    try {\n      const contacts = await getContactsAPI(secret);\n      return contacts;\n    } catch (e) {\n      throw e;\n    }\n  }\n);\nexport const saveContact = createAsyncThunk(\n  'contact/save',\n  async ({ contact, secret } : { contact: Contact | ContactContent, secret: string }) => {\n    try {\n      const newContact = await saveContactAPI(contact, secret);\n      return newContact;\n    } catch (e) {\n      throw e;\n    }\n  }\n);\nexport const deleteContact = createAsyncThunk(\n  'contact/delete',\n  async ({ contact, secret } : { contact: Contact, secret: string }) => {\n    try {\n      await deleteContactAPI(contact, secret);\n      return contact;\n    } catch (e) {\n      throw e;\n    }\n  }\n);\n\nexport const contactSlice = createSlice({\n  name: 'contact',\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => builder\n    .addCase(getContacts.fulfilled, (state, action) => {\n      const contacts = action.payload;\n      state.contacts = contacts.reduce((map, contact) => ({ ...map, [contact.id]: contact }), {});\n    })\n    .addCase(saveContact.fulfilled, (state, action) => {\n      const contact = action.payload;\n      state.contacts[contact.id] = contact;\n    })\n    .addCase(deleteContact.fulfilled, (state, action) => {\n      const contact = action.payload;\n      delete state.contacts[contact.id];\n    }),\n});\n\nexport default contactSlice.reducer;\n","import { v4 as uuidv4 } from 'uuid';\nimport { checkDatabaseExist, loadContacts, storeContacts } from '../../datastore';\nimport { defaultContacts } from '../../datastore.config';\n\nexport const checkDatabase = async (): Promise<Boolean> => await checkDatabaseExist();\n\nexport const initDatabase = async (password: string): Promise<void> => {\n  try {\n    await storeContacts(defaultContacts.map((contact) => ({ ...contact, id: uuidv4() })), password);\n  } catch (e) {\n    throw e;\n  }\n}\n  \n\nexport const login = async (password: string): Promise<Boolean> => {\n  try {\n    await loadContacts(password);\n    return true;  \n  } catch (e) {\n    // wrong password for decrypt, or fail to parse the decrypted JSON\n    return false;\n  }\n};","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { deleteContact, getContacts, saveContact } from '../contact/slice';\nimport { checkDatabase as checkDatabaseAPI, initDatabase as initDatabaseAPI, login as loginAPI } from './api';\n\nexport type UserState = {\n  hasInit: Boolean;\n  hasLogin: Boolean;\n  initFailed: Boolean;\n  loginFailed: Boolean;\n  dataCorrupted: Boolean;\n  secret: string;\n};\n\nconst initialState: UserState = {\n  hasInit: false,\n  hasLogin: false,\n  initFailed: false,\n  loginFailed: false,\n  dataCorrupted: false,\n  secret: \"\",\n};\n\nexport const checkDatabase = createAsyncThunk(\n  'system/checkDatabase',\n  async () => {\n    const hasInit = await checkDatabaseAPI();\n    return hasInit;\n  }\n);\nexport const initDatabase = createAsyncThunk(\n  'system/initDatabase',\n  async (password: string) => {\n    await initDatabaseAPI(password);\n  }\n);\nexport const login = createAsyncThunk(\n  'system/login',\n  async (password: string) => {\n    const success = await loginAPI(password);\n    return success;\n  }\n);\n\nexport const systemSlice = createSlice({\n  name: 'system',\n  initialState,\n  reducers: {\n    logout: () => initialState,\n  },\n  extraReducers: (builder) => builder\n    .addCase(checkDatabase.fulfilled, (state, action) => {\n      state.hasInit = action.payload;\n    })\n    .addCase(initDatabase.fulfilled, (state, action) => {\n      state.hasInit = true;\n      state.hasLogin = true;\n      state.secret = action.meta.arg;\n    })\n    .addCase(login.fulfilled, (state, action) => {\n      const success = action.payload;\n      state.hasLogin = success;\n      state.initFailed = false;\n      state.loginFailed = !success;\n      state.dataCorrupted = false;\n      if (success) {\n        state.secret = action.meta.arg;\n      }\n    })\n    .addCase(initDatabase.rejected, (state, action) => {\n      state.hasInit = false;\n      state.initFailed = true;\n    })\n    .addCase(getContacts.rejected, (state, action) => {\n      state.dataCorrupted = !!action.meta.arg.secret; // fail to load contacts with secret = data corrupted\n      state.hasLogin = false;\n    })\n    .addCase(saveContact.rejected, (state, action) => {\n      state.dataCorrupted = !!action.meta.arg.secret; // fail to save contacts with secret = data corrupted\n      state.hasLogin = false;\n    })\n    .addCase(deleteContact.rejected, (state, action) => {\n      state.dataCorrupted = !!action.meta.arg.secret; // fail to delete contacts with secret = data corrupted\n      state.hasLogin = false;\n    })\n});\n\nexport const { logout } = systemSlice.actions;\n\nexport default systemSlice.reducer;\n","import { configureStore, combineReducers, ThunkAction, Action } from '@reduxjs/toolkit';\nimport { createBrowserHistory } from 'history';\nimport { connectRouter, routerMiddleware } from 'connected-react-router';\n\nimport systemReducer from '../features/system/slice';\nimport contactReducer from '../features/contact/slice';\n\nexport const history = createBrowserHistory({ basename: process.env.PUBLIC_URL });\n\nexport const rootReducer = combineReducers({\n  router: connectRouter(history),\n  system: systemReducer,\n  contact: contactReducer,\n});\n\nexport const store = configureStore({\n  reducer: rootReducer,\n  middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(routerMiddleware(history)),\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from './store';\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { Button, Form, FormControl, FormText, ListGroup } from 'react-bootstrap';\nimport { Contact } from '../features/contact/slice';\n\nexport type ContactListProps = {\n  contacts: Contact[],\n  onSelect: (id: string) => void,\n  onCreate: () => void,\n};\n\n// highlight the matched string in the provided string\nconst highlight = (str: string, search: string) => {\n  if (str.toLowerCase().includes(search.toLowerCase())) {\n    const regexp = new RegExp(search, \"ig\");\n    const tokens = str.split(regexp);\n    const matched = str.match(regexp);\n    return tokens.map((token, i) => {\n      const match = i > 0 ? <mark className=\"p-0\">{matched?.[i-1] ?? \"\"}</mark> : \"\";\n      return (<React.Fragment key={`token-${token}-${i}`}>{match}{token}</React.Fragment>);\n    });\n  } else {\n    return str;\n  }\n};\n\nconst ContactList = (props: ContactListProps) => {\n  const { contacts, onSelect, onCreate } = props;\n  const [search, setSearch] = useState<string>(\"\");\n  const [filteredContacts, setFilteredContacts] = useState<Contact[]>(contacts);\n\n  const onSearchChange = useCallback((ev: React.ChangeEvent<HTMLInputElement>) => setSearch(ev.target.value), []);\n  const onCreateBtnClick = useCallback(() => onCreate(), [onCreate]);\n\n  // whenever \"search\"/\"contacts\" changed, filter the contacts with \"search\"\n  useEffect(() => {\n    if (search) {\n      setFilteredContacts(contacts.filter((contact) => {\n        const lowerValue = search.toLowerCase();\n        return (\n          contact.name.toLowerCase().includes(lowerValue) ||\n          contact.phone.toLowerCase().includes(lowerValue) ||\n          contact.email.toLowerCase().includes(lowerValue) ||\n          contact.address.toLowerCase().includes(lowerValue)\n        );\n      }));\n    } else {\n      setFilteredContacts(contacts);\n    }\n  }, [search, contacts]);\n\n  return (\n    <>\n      <nav className=\"d-flex justify-content-end border-bottom\">\n        <Form.Group className=\"w-100 d-flex align-items-center\">\n          <FormText as=\"i\" className=\"position-absolute bi bi-search ms-2\" />\n          <FormControl\n            className=\"border-0 ps-4\"\n            type=\"search\"\n            value={search}\n            onChange={onSearchChange}\n            title=\"Search Contacts\"\n            aria-label=\"Search Contacts\" />\n        </Form.Group>\n        <Button variant=\"light\" title=\"Add New Contact\" aria-label=\"Add New Contact\" onClick={onCreateBtnClick}>\n          <i className=\"bi bi-plus-lg\"></i>\n        </Button>\n      </nav>\n      {!!filteredContacts.length ? (\n        <ListGroup className=\"data-list mb-3\">\n          {filteredContacts.map((contact) =>\n            <ListGroup.Item\n              key={contact.id}\n              className=\"d-flex text-truncate border-0 border-bottom\"\n              action\n              onClick={() => onSelect(contact.id)}>\n              <FormText as=\"i\" className=\"bi bi-person-circle me-2\" />\n              <FormText as=\"label\" className=\"text-dark me-2\">{highlight(contact.name, search)}</FormText>\n              <FormText className=\"ms-auto text-truncate\"><small>{highlight(contact.phone, search)}</small></FormText>\n            </ListGroup.Item>\n          )}\n        </ListGroup>\n      ) : (\n        <div className=\"h-75 d-flex justify-content-center align-items-center\">{!!search ? \"No Matched Contacts.\" : \"No Contacts.\"}</div>\n      )}\n    </>\n  );\n};\n\nContactList.defaultProps = {\n  contacts: [],\n  onSelect: () => undefined,\n  onCreate: () => undefined,\n};\n\nexport default ContactList;","import React, { useCallback, useEffect, useState } from 'react';\nimport { Button, Col, Form, FormControl, FormGroup, FormLabel, Row } from 'react-bootstrap';\nimport * as emailValidator from 'email-validator';\n\nimport { Contact, ContactContent } from '../features/contact/slice';\n\nexport type ContactViewProps = {\n  contact: Contact | null | undefined,\n  edit: Boolean,\n  onSave: (contact: Contact | ContactContent) => void,\n  onClose: () => void,\n};\n\nconst ContactView = (props: ContactViewProps) => {\n  const { contact, edit, onSave, onClose } = props;\n  const [isEditing, setIsEditing] = useState<Boolean>(edit);\n  const [name, setName] = useState<string>(contact?.name ?? \"\");\n  const [phone, setPhone] = useState<string>(contact?.phone ?? \"\");\n  const [email, setEmail] = useState<string>(contact?.email ?? \"\");\n  const [address, setAddress] = useState<string>(contact?.address ?? \"\");\n  const [isEmailValid, setIsEmailValid] = useState<Boolean>(true);\n\n  // reset state whenever given contact changed\n  useEffect(() => {\n    setIsEditing(false);\n    setName(contact?.name ?? \"\");\n    setPhone(contact?.phone ?? \"\");\n    setEmail(contact?.email ?? \"\");\n    setAddress(contact?.address ?? \"\");\n  }, [contact]);\n\n  // if \"edit\" is provided with true, open contact view with editing mode\n  useEffect(() => setIsEditing(edit), [edit]);\n\n  // validate email format\n  useEffect(() => setIsEmailValid(!email || emailValidator.validate(email)), [email]);\n\n  const onEditBtnClick = useCallback(() => setIsEditing(true), []);\n  const onCloseBtnClick = useCallback(() => onClose(), [onClose]);\n  const onSaveBtnClick = useCallback(() => {\n    if (name && phone && email && address && isEmailValid) {\n      onSave({ id: contact?.id, name, phone, email, address });\n      setIsEditing(false);\n    }\n  }, [contact, name, phone, email, address, isEmailValid, onSave]);\n  const onCancelBtnClick = useCallback(() => edit ? onClose() : setIsEditing(false), [edit, onClose]);\n  const onNameChange = useCallback((ev: React.ChangeEvent<HTMLInputElement>) => setName(ev.target.value), []);\n  const onPhoneChange = useCallback((ev: React.ChangeEvent<HTMLInputElement>) => setPhone(ev.target.value), []);\n  const onEmailChange = useCallback((ev: React.ChangeEvent<HTMLInputElement>) => setEmail(ev.target.value), []);\n  const onAddressChange = useCallback((ev: React.ChangeEvent<HTMLInputElement>) => setAddress(ev.target.value), []);\n\n  // if no contacts provided, and it's not open in edit mode, render nth\n  if (!contact && !edit) {\n    return null;\n  }\n\n  return (\n    <>\n      <nav className=\"d-flex justify-content-end border-bottom\">\n        {!isEditing && (\n          <Button variant=\"light\" title=\"Edit this Contact\" aria-label=\"Edit this Contact\" onClick={onEditBtnClick}>\n            <i className=\"bi bi-pencil-fill\"></i>\n          </Button>\n        )}\n        <Button variant=\"light\" title=\"Close this Contact\" aria-label=\"Close this Contact\" onClick={onCloseBtnClick}>\n          <i className=\"bi bi-x-lg\"></i>\n        </Button>\n      </nav>\n      {isEditing ? (\n        <div className=\"d-flex flex-column p-5\">\n          <h1 className=\"align-self-center display-1\"><i className=\"bi bi-person-circle\"></i></h1>\n          <Form className=\"m-3\">\n            <FormGroup as={Row} className=\"mt-1\">\n              <FormLabel column xs={3} className=\"text-nowrap\"><i className=\"bi bi-person me-2\"></i>Name</FormLabel>\n              <Col xs={9}>\n                <FormControl type=\"text\" placeholder=\"Name\" value={name} onChange={onNameChange} />\n              </Col>\n            </FormGroup>\n            <FormGroup as={Row} className=\"mt-1\">\n              <FormLabel column xs={3} className=\"text-nowrap\"><i className=\"bi bi-telephone me-2\"></i>Phone</FormLabel>\n              <Col xs={9}>\n                <FormControl type=\"tel\" placeholder=\"Phone\" value={phone} onChange={onPhoneChange} />\n              </Col>\n            </FormGroup>\n            <FormGroup as={Row} className=\"mt-1\">\n              <FormLabel column xs={3} className=\"text-nowrap\"><i className=\"bi bi-envelope me-2\"></i>Email</FormLabel>\n              <Col xs={9}>\n                <FormControl type=\"email\" placeholder=\"Email\" value={email} isInvalid={!isEmailValid} onChange={onEmailChange} />\n                <FormControl.Feedback type=\"invalid\">Not a valid email.</FormControl.Feedback>\n              </Col>\n            </FormGroup>\n            <FormGroup as={Row} className=\"mt-1\">\n              <FormLabel column xs={3} className=\"text-nowrap\"><i className=\"bi bi-house me-2\"></i>Address</FormLabel>\n              <Col xs={9}>\n                <FormControl as=\"textarea\" rows={5} placeholder=\"Address\" value={address} onChange={onAddressChange} />\n              </Col>\n            </FormGroup>\n            <FormGroup className=\"d-flex justify-content-end mt-1\">\n              <Button\n                variant=\"primary\"\n                className=\"m-1\"\n                title=\"Save this Contact\"\n                disabled={!(name && phone && email && address && isEmailValid)}\n                aria-label=\"Save this Contact\"\n                onClick={onSaveBtnClick}>\n                Save\n              </Button>\n              <Button variant=\"light\" className=\"m-1\" title=\"Back to View\" aria-label=\"Back to View\" onClick={onCancelBtnClick}>Cancel</Button>\n            </FormGroup>\n          </Form>\n        </div>\n      ) : (\n        <div className=\"d-flex flex-column p-5\">\n          <h1 className=\"align-self-center display-1\"><i className=\"bi bi-person-circle\"></i></h1>\n          <h1 className=\"align-self-center\">{name}</h1>\n          <address className=\"m-3\">\n            <div title=\"Phone\">\n              <i className=\"bi bi-telephone me-2\"></i>\n              <span>{phone}</span>\n            </div>\n            <div title=\"Email\">\n              <i className=\"bi bi-envelope me-2\"></i>\n              <span>{email}</span>\n            </div>\n            <div className=\"d-flex\" title=\"Address\">\n              <i className=\"bi bi-house me-2\"></i>\n              <span>{address.split(\"\\n\").map((line, i) => <div key={`line-${line}-${i}`}>{line}</div>)}</span>\n            </div>\n          </address>\n        </div>\n      )}\n    </>\n  );\n};\n\nContactView.defaultProps = {\n  contact: null,\n  edit: false,\n  onSave: () => undefined,\n  onClose: () => undefined,\n};\n\nexport default ContactView;","import React, { useState, useCallback, useEffect } from 'react';\nimport { Redirect, useHistory, useParams } from 'react-router-dom';\nimport { Col, Container, Row } from 'react-bootstrap';\n\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\nimport { Contact, ContactContent, getContacts, saveContact } from '../../features/contact/slice';\nimport ContactList from '../../components/ContactList';\nimport ContactView from '../../components/ContactView';\n\nconst ContactPage = () => {\n  const dispatch = useAppDispatch();\n  const history = useHistory();\n  const { id } = useParams<{ id: string }>();\n  const [contacts, setContacts] = useState<Contact[]>([]);\n  const { hasInit, hasLogin, secret } = useAppSelector((state) => state.system);\n  const isCreate = history.location.pathname.startsWith(\"/contacts/create\");\n  const contactMap = useAppSelector((state) => state.contact.contacts);\n  const contact = isCreate ? null : (contactMap[id] ?? null);\n\n  // when page load, load the contacts\n  useEffect(() => {\n    dispatch(getContacts({ secret }));\n  }, [secret, dispatch]);\n\n  // sort contacts to be array from the contact map\n  useEffect(() => {\n    setContacts(Object.values(contactMap).sort((a, b) => a.name.localeCompare(b.name)));\n  }, [contactMap]);\n\n  // handler for selecting contact, redirect URL to open contact view\n  const onSelectContact = useCallback((id: string) => history.push(`/contacts/view/${id}`), [history]);\n  // handler for closing opened contact, redirect URL to close contact view\n  const onCloseContact = useCallback(() => history.push(\"/contacts\"), [history]);\n  // handler for clicking create button, redirect URL to open create contact view\n  const onCreateContact = useCallback(() => history.push(\"/contacts/create\"), [history]);\n  // handler for saving contact, and then redirect URL to close contact view\n  const onSaveContact = useCallback((contact: Contact | ContactContent) => {\n    dispatch(saveContact({ contact, secret }));\n    history.push(\"/contacts\");\n  }, [secret, history, dispatch]);\n\n  // app not yet init, go to init page\n  if (!hasInit) {\n    return <Redirect to=\"/\" />;\n  }\n  \n  // user not yet login, go to login page\n  if (!hasLogin) {\n    return <Redirect to=\"/login\" />;\n  }\n\n  return (\n    <Container fluid className=\"h-100 border rounded\">\n      <Row className=\"h-100\">\n        <Col xs={4} className=\"h-100 p-0 border-end overflow-auto\">\n          <ContactList contacts={contacts} onSelect={onSelectContact} onCreate={onCreateContact} />\n        </Col>\n        <Col xs={8} className=\"h-100 p-0\">\n          <ContactView contact={contact} edit={isCreate} onClose={onCloseContact} onSave={onSaveContact} />\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default ContactPage;","import React, { useState, useCallback } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { InputGroup, FormControl, Button, Col, Container, Row, Alert } from 'react-bootstrap';\n\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\nimport { login } from '../../features/system/slice';\n\nconst LoginPage = () => {\n  const dispatch = useAppDispatch();\n  const { hasInit, hasLogin, loginFailed, dataCorrupted } = useAppSelector((state) => state.system);\n  const [password, setPassword] = useState<string>(\"\");\n\n  const onPasswordChange = useCallback((ev: React.ChangeEvent<HTMLInputElement>) => setPassword(ev.target.value), []);\n  const onLoginBtnClick = useCallback(() => dispatch(login(password)), [password, dispatch]);\n  const onCloseBtnClick = useCallback(() => window.close(), []);\n\n  // app not yet init, go to init page\n  if (!hasInit) {\n    return <Redirect to=\"/\" />;\n  }\n  \n  // user already login, go to contact page\n  if (hasLogin) {\n    return <Redirect to=\"/contacts\" />;\n  }\n\n  return (\n    <Container>\n      <Row>\n        <Col className=\"text-center m-2\">\n          <h3>Welcome to Simple Secure Contact Manager</h3>\n        </Col>\n      </Row>\n      <Row>\n        <Col className=\"text-center m-3\">\n          <h5>Please enter the password for your contact data file.</h5>\n        </Col>\n      </Row>\n      <Row className=\"justify-content-center\">\n        <Col xs={12} sm={8} md={6}>\n          <Alert show={!!loginFailed || !!dataCorrupted} variant=\"danger\">\n            {!!loginFailed && \"Password mismatch. Failed to open the application.\"}\n            {!!dataCorrupted && \"Data Corrupted. Failed to access the data by given password.\"}\n          </Alert>\n          <InputGroup className=\"mb-3\">\n            <InputGroup.Prepend>\n              <InputGroup.Text id=\"password-desc\">\n                <i className=\"bi bi-key-fill\"></i>\n              </InputGroup.Text>\n            </InputGroup.Prepend>\n            <FormControl\n              id=\"password\"\n              type=\"password\"\n              value={password}\n              placeholder=\"Password\"\n              aria-label=\"Password\"\n              aria-describedby=\"password-desc\"\n              onChange={onPasswordChange} />\n          </InputGroup>\n        </Col>\n      </Row>\n      <Row>\n        <Col className=\"d-flex justify-content-center\">\n          <Button className=\"m-2\" variant=\"primary\" onClick={onLoginBtnClick}>Open the App</Button>\n          <Button className=\"m-2\" variant=\"light\" onClick={onCloseBtnClick}>Close</Button>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default LoginPage;","import React, { useState, useCallback } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { InputGroup, FormControl, Button, Col, Container, Row, Alert } from 'react-bootstrap';\n\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\nimport { initDatabase } from '../../features/system/slice';\n\ndeclare const window: any;\n\nconst InitPage = () => {\n  const dispatch = useAppDispatch();\n  const { hasInit, hasLogin, initFailed } = useAppSelector((state) => state.system);\n  const [password, setPassword] = useState<string>(\"\");\n  const [confirmPassword, setConfirmPassword] = useState<string>(\"\");\n\n  const onPasswordChange = useCallback((ev: React.ChangeEvent<HTMLInputElement>) => setPassword(ev.target.value), []);\n  const onConfirmPasswordChange = useCallback((ev: React.ChangeEvent<HTMLInputElement>) => setConfirmPassword(ev.target.value), []);\n  const onSetupBtnClick = useCallback(() => {\n    if (!!password && password === confirmPassword) {\n      dispatch(initDatabase(password));\n    }\n  }, [password, confirmPassword, dispatch]);\n  const onCloseBtnClick = useCallback(() => window.close(), []);\n  \n  // user already login, go to contact page\n  if (hasLogin) {\n    return <Redirect to=\"/contacts\" />;\n  }\n\n  // app already init, go to login page\n  if (hasInit) {\n    return <Redirect to=\"/login\" />;\n  }\n\n  return (\n    <Container>\n      <Row>\n        <Col className=\"text-center m-2\">\n          <h3>Initialization Wizard</h3>\n        </Col>\n      </Row>\n      <Row>\n        <Col className=\"text-center m-3\">\n          <h5>Please setup a password for the Simple Secure Contact Manager.</h5>\n        </Col>\n      </Row>\n      <Row className=\"justify-content-center\">\n        <Col xs={12} sm={8} md={6}>\n          <Alert show={!!initFailed} variant=\"danger\">Setup failed. Cannot initialize the data file (check permission?).</Alert>\n          <InputGroup className=\"mb-3\">\n            <InputGroup.Prepend>\n              <InputGroup.Text id=\"password-desc\">\n                <i className=\"bi bi-key-fill\"></i>\n              </InputGroup.Text>\n            </InputGroup.Prepend>\n            <FormControl\n              id=\"password\"\n              type=\"password\"\n              value={password}\n              placeholder=\"Password\"\n              aria-label=\"Password\"\n              aria-describedby=\"password-desc\"\n              onChange={onPasswordChange} />\n          </InputGroup>\n        </Col>\n      </Row>\n      <Row className=\"justify-content-center\">\n        <Col xs={12} sm={8} md={6}>\n          <InputGroup className=\"mb-3\">\n            <InputGroup.Prepend>\n              <InputGroup.Text id=\"confirm-password-desc\">\n                <i className=\"bi bi-key-fill\"></i>\n              </InputGroup.Text>\n            </InputGroup.Prepend>\n            <FormControl\n              id=\"confirm-password\"\n              type=\"password\"\n              value={confirmPassword}\n              isInvalid={!!confirmPassword && password !== confirmPassword}\n              placeholder=\"Confirm Password\"\n              aria-label=\"Confirm Password\"\n              aria-describedby=\"confirm-password-desc\"\n              onChange={onConfirmPasswordChange} />\n            <FormControl.Feedback type=\"invalid\">Password not match.</FormControl.Feedback>\n          </InputGroup>\n        </Col>\n      </Row>\n      <Row>\n        <Col className=\"d-flex justify-content-center\">\n          <Button className=\"m-2\" variant=\"primary\" onClick={onSetupBtnClick} disabled={!password || password !== confirmPassword}>Setup</Button>\n          <Button className=\"m-2\" variant=\"light\" onClick={onCloseBtnClick}>Close</Button>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default InitPage;","import React, { useEffect } from 'react';\nimport { ConnectedRouter } from 'connected-react-router';\nimport { Route, Switch } from 'react-router';\n\nimport { history } from './app/store';\nimport ContactPage from './pages/ContactPage';\nimport LoginPage from './pages/LoginPage';\nimport InitPage from './pages/InitPage';\n\nimport './App.scss';\nimport { useAppDispatch } from './app/hooks';\nimport { checkDatabase } from './features/system/slice';\n\nconst App = () => {\n  const dispatch = useAppDispatch();\n\n  // when app load, check the database status and see whether it needs to initialize\n  useEffect(() => {\n    dispatch(checkDatabase());\n  }, [dispatch]);\n\n  return (\n    <ConnectedRouter history={history}>\n      <Switch>\n        <Route path={[\"/contacts/view/:id\", \"/contacts/create\", \"/contacts\"]} render={() => <ContactPage />} />\n        <Route path=\"/login\" render={() => <LoginPage />} />\n        <Route path=\"/\" render={() => <InitPage />} />\n      </Switch>\n    </ConnectedRouter>\n  );\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport App from './App';\nimport { store } from './app/store';\nimport * as serviceWorker from './serviceWorker';\n\nimport './index.css';\nimport 'normalize.css/normalize.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap-icons/font/bootstrap-icons.css';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}